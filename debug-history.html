<!DOCTYPE html>
<html>
<head>
    <title>Debug Firebase Schedule History</title>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, get } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        const firebaseConfig = {
            apiKey: "AIzaSyB_VsLZaaQ_m3WNVlPjfhy715BXo8ax004",
            authDomain: "tracking-budget-app.firebaseapp.com",
            databaseURL: "https://tracking-budget-app-default-rtdb.firebaseio.com/",
            projectId: "tracking-budget-app",
            storageBucket: "tracking-budget-app.appspot.com",
            messagingSenderId: "912992088190",
            appId: "1:912992088190:web:d5ea1a3157722b8feb282f"
        };

        async function debugScheduleHistory() {
            try {
                console.log('üîç Checking Firebase for schedule history...');
                const app = initializeApp(firebaseConfig);
                const database = getDatabase(app);
                
                const scheduleRef = ref(database, 'meetingSchedule');
                const snapshot = await get(scheduleRef);
                
                if (snapshot.exists()) {
                    const data = snapshot.val();
                    console.log('‚úÖ Firebase data found!');
                    
                    const output = document.getElementById('output');
                    
                    if (data.scheduleHistory) {
                        console.log('üìö Schedule History:', data.scheduleHistory);
                        output.innerHTML = `
                            <h2>‚úÖ Schedule History Found!</h2>
                            <p><strong>Number of saved schedules:</strong> ${data.scheduleHistory.length}</p>
                            <pre>${JSON.stringify(data.scheduleHistory, null, 2)}</pre>
                        `;
                    } else {
                        console.warn('‚ö†Ô∏è No scheduleHistory found in Firebase data');
                        output.innerHTML = `
                            <h2>‚ö†Ô∏è No Schedule History</h2>
                            <p>Firebase has data but no scheduleHistory array.</p>
                            <p><strong>Available keys:</strong> ${Object.keys(data).join(', ')}</p>
                            <pre>${JSON.stringify(data, null, 2).substring(0, 1000)}...</pre>
                        `;
                    }
                } else {
                    console.error('‚ùå No data in Firebase');
                    document.getElementById('output').innerHTML = '<h2>‚ùå No data in Firebase at meetingSchedule path</h2>';
                }
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('output').innerHTML = `<h2>Error: ${error.message}</h2>`;
            }
        }

        window.addEventListener('load', debugScheduleHistory);
    </script>
</head>
<body style="font-family: sans-serif; padding: 20px;">
    <h1>üîç Debug Firebase Schedule History</h1>
    <div id="output">Loading...</div>
    <p><strong>Check browser console for detailed output</strong></p>
</body>
</html>
